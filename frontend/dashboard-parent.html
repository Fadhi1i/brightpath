<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BrightPath | Parent Dashboard</title>

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap"
      rel="stylesheet"
    />

    <!-- Styles -->
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/css/dashboard.css" />
  </head>

  <body id="top">
    <!-- âœ… Mobile menu toggle -->
    <button class="menu-toggle" id="menuToggleBtn">â˜°</button>

    <div class="dashboard">
      <!-- Sidebar -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <img
            src="assets/images/logo.jpg"
            alt="BrightPath Logo"
            class="logo"
          />
          <h2>BrightPath</h2>
        </div>

        <nav class="sidebar-nav">
          <ul>
            <li class="active"><a href="#top">ğŸ  Dashboard</a></li>
            <li><a href="#performance">ğŸ“Š Performance</a></li>
            <li><a href="#teacherCommentsSection">ğŸ—£ï¸ Teacher Comments</a></li>
            <li><a href="#announcements">ğŸ“¢ Announcements</a></li>
          </ul>
        </nav>

        <div class="sidebar-footer">
          <a href="#" id="logoutBtn">ğŸšª Logout</a>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="content" id="content">
        <header class="content-header">
          <h1>Welcome, <span id="parentName">Parent</span> ğŸ‘‹</h1>
          <p>Hereâ€™s how your child is performing this term.</p>
        </header>

        <!-- ğŸ§’ Student Info Section -->
        <section class="card" id="studentInfo">
          <h2>ğŸ‘¨â€ğŸ“ Student Information</h2>
          <div class="student-details">
            <p><strong>Name:</strong> <span id="studentName">Loading...</span></p>
            <p><strong>Reg No:</strong> <span id="studentReg">Loading...</span></p>
            <p><strong>Grade:</strong> <span id="studentGrade">Loading...</span></p>
          </div>
        </section>

        <!-- Performance Section -->
        <section class="card" id="performance">
          <h2>ğŸ“ˆ Academic Performance</h2>
          <table class="performance-table">
            <thead>
              <tr>
                <th>Subject</th>
                <th>Marks</th>
                <th>Grade</th>
              </tr>
            </thead>
            <tbody id="performanceData"></tbody>
          </table>
        </section>

        <!-- ğŸ§  AI Tools -->
        <div class="ai-box">
          <h3>Notes Summarizer</h3>
          <textarea id="inputText" placeholder="Paste your notes here..."></textarea>
          <button id="summarizeBtn">Summarize</button>
          <p id="result"></p>
        </div>

        <div id="aiExplainer" class="ai-box">
          <h3>AI Tutor</h3>
          <textarea
            id="conceptInput"
            placeholder="Type a concept to explain (e.g., photosynthesis)..."
          ></textarea>
          <button id="explainBtn">Explain</button>
          <p id="explanationResult"></p>
        </div>

        <div id="aiQuestionGenerator" class="ai-box">
          <h3>AI Question Generator</h3>
          <textarea
            id="questionInput"
            placeholder="Paste a passage or topic here..."
          ></textarea>
          <button id="generateBtn">Generate Questions</button>
          <pre id="questionResult"></pre>
        </div>

        <!-- Comments Section -->
        <section class="card" id="teacherCommentsSection">
          <h2>ğŸ’¬ Teacher Remarks</h2>
          <div id="teacherComments"></div>
        </section>

        <!-- Announcements Section -->
        <section class="card" id="announcements">
          <h2>ğŸ“¢ Announcements</h2>
          <div id="announcementsList" class="announcement-list">
            <p class="empty">Loading announcements...</p>
          </div>
        </section>
      </main>
    </div>

    <!-- âœ… Scripts -->
    <script src="assets/js/main.js" defer></script>
    <script src="assets/js/dashboard.js" defer></script>
    <script src="assets/js/parent.js" defer></script>

    <script>
      // Sidebar toggle for mobile
      const toggleBtn = document.getElementById("menuToggleBtn");
      const sidebar = document.getElementById("sidebar");
      const content = document.getElementById("content");

      toggleBtn.addEventListener("click", () => {
        sidebar.classList.toggle("active");
        content.classList.toggle("shift");
      });

      // Close sidebar when tapping outside
      document.addEventListener("click", (e) => {
        if (
          window.innerWidth <= 768 &&
          !sidebar.contains(e.target) &&
          !toggleBtn.contains(e.target)
        ) {
          sidebar.classList.remove("active");
          content.classList.remove("shift");
        }
      });

      // AI: Summarizer
      document
        .getElementById("summarizeBtn")
        .addEventListener("click", async () => {
          const text = document.getElementById("inputText").value;
          const res = await fetch("https://brightpath-3.onrender.com/summarize", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ text }),
          });
          const data = await res.json();
          document.getElementById("result").innerText = data.summary;
        });

      // AI: Explain Concept
      document
        .getElementById("explainBtn")
        .addEventListener("click", async () => {
          const concept = document.getElementById("conceptInput").value.trim();
          const result = document.getElementById("explanationResult");

          if (!concept) {
            result.innerText = "Please type a concept first.";
            return;
          }

          result.innerText = "Thinking... â³";
          const res = await fetch("https://brightpath-3.onrender.com/explain", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ concept }),
          });
          const data = await res.json();
          result.innerText = data.explanation;
        });

      // AI: Question Generator
      document
        .getElementById("generateBtn")
        .addEventListener("click", async () => {
          const text = document.getElementById("questionInput").value.trim();
          const result = document.getElementById("questionResult");

          if (!text) {
            result.innerText = "Please enter text first.";
            return;
          }

          result.innerText = "Generating questions... â³";
          const res = await fetch(
            "https://brightpath-3.onrender.com/generate-questions",
            {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ text }),
            }
          );

          const data = await res.json();
          result.innerText = data.questions;
        });
    </script>
  </body>
</html>
